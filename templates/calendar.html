<!DOCTYPE html>
<html>
<head>
  <title>Calendar â€” Smart To-Do</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js"></script>
  <style>
    body { font-family: 'Inter', sans-serif; background:#f7f9fb; }
    #calendar { background:#fff; padding:18px; border-radius:12px; box-shadow:0 6px 18px rgba(18,38,63,0.04); }
  </style>
</head>
<body>
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Calendar</h3>
    <div><a class="btn btn-outline-secondary btn-sm" href="{{ url_for('index') }}">Back</a></div>
  </div>

  <div id="calendar"></div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  var calendarEl = document.getElementById('calendar');
  var events = [
    {% for task in tasks %}
      {% if task.due_date %}
    {
      title: "{{ task.title|escapejs }}",
      start: "{{ task.due_date.strftime('%Y-%m-%dT%H:%M:%S') }}",
      color: "{% if task.priority=='High' %}#e74c3c{% elif task.priority=='Medium' %}#f1c40f{% else %}#2ecc71{% endif %}"
    },
      {% endif %}
    {% endfor %}
  ];

  var calendar = new FullCalendar.Calendar(calendarEl, {
    initialView: 'dayGridMonth',
    height: 'auto',
    events: events,
    eventTimeFormat: { hour: '2-digit', minute: '2-digit', hour12: false }
  });
  calendar.render();
});
</script>
</body>
</html>
